{"id":"../node_modules/nem-sdk/build/model/transactions/send.js","dependencies":[{"name":"/Users/yugo/Dropbox/Programing/NEM/streetnems/node_modules/nem-sdk/build/model/transactions/send.js.map","includedInParent":true,"mtime":1555076382985},{"name":"/Users/yugo/Dropbox/Programing/NEM/streetnems/package.json","includedInParent":true,"mtime":1555076384616},{"name":"/Users/yugo/Dropbox/Programing/NEM/streetnems/node_modules/nem-sdk/package.json","includedInParent":true,"mtime":1555076377737},{"name":"/Users/yugo/Dropbox/Programing/NEM/streetnems/node_modules/nem-sdk/.babelrc","includedInParent":true,"mtime":1530213456000},{"name":"../../utils/helpers","loc":{"line":7,"column":23},"parent":"/Users/yugo/Dropbox/Programing/NEM/streetnems/node_modules/nem-sdk/build/model/transactions/send.js","resolved":"/Users/yugo/Dropbox/Programing/NEM/streetnems/node_modules/nem-sdk/build/utils/helpers.js"},{"name":"../../utils/convert","loc":{"line":11,"column":23},"parent":"/Users/yugo/Dropbox/Programing/NEM/streetnems/node_modules/nem-sdk/build/model/transactions/send.js","resolved":"/Users/yugo/Dropbox/Programing/NEM/streetnems/node_modules/nem-sdk/build/utils/convert.js"},{"name":"../../utils/serialization","loc":{"line":15,"column":29},"parent":"/Users/yugo/Dropbox/Programing/NEM/streetnems/node_modules/nem-sdk/build/model/transactions/send.js","resolved":"/Users/yugo/Dropbox/Programing/NEM/streetnems/node_modules/nem-sdk/build/utils/serialization.js"},{"name":"../../crypto/keyPair","loc":{"line":19,"column":23},"parent":"/Users/yugo/Dropbox/Programing/NEM/streetnems/node_modules/nem-sdk/build/model/transactions/send.js","resolved":"/Users/yugo/Dropbox/Programing/NEM/streetnems/node_modules/nem-sdk/build/crypto/keyPair.js"},{"name":"../../com/requests","loc":{"line":23,"column":24},"parent":"/Users/yugo/Dropbox/Programing/NEM/streetnems/node_modules/nem-sdk/build/model/transactions/send.js","resolved":"/Users/yugo/Dropbox/Programing/NEM/streetnems/node_modules/nem-sdk/build/com/requests/index.js"}],"generated":{"js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _helpers = require('../../utils/helpers');\n\nvar _helpers2 = _interopRequireDefault(_helpers);\n\nvar _convert = require('../../utils/convert');\n\nvar _convert2 = _interopRequireDefault(_convert);\n\nvar _serialization = require('../../utils/serialization');\n\nvar _serialization2 = _interopRequireDefault(_serialization);\n\nvar _keyPair = require('../../crypto/keyPair');\n\nvar _keyPair2 = _interopRequireDefault(_keyPair);\n\nvar _requests = require('../../com/requests');\n\nvar _requests2 = _interopRequireDefault(_requests);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Serialize a transaction and broadcast it to the network\n *\n * @param {object} common - A common object\n * @param {object} entity - A prepared transaction object\n * @param {object} endpoint - An NIS endpoint object\n *\n * @return {promise} - An announce transaction promise of the com.requests service\n */\nvar send = function send(common, entity, endpoint) {\n    if (!endpoint || !entity || !common) throw new Error('Missing parameter !');\n    if (common.privateKey.length !== 64 && common.privateKey.length !== 66) throw new Error('Invalid private key, length must be 64 or 66 characters !');\n    if (!_helpers2.default.isHexadecimal(common.privateKey)) throw new Error('Private key must be hexadecimal only !');\n    var kp = _keyPair2.default.create(_helpers2.default.fixPrivateKey(common.privateKey));\n    var result = _serialization2.default.serializeTransaction(entity);\n    var signature = kp.sign(result);\n    var obj = {\n        'data': _convert2.default.ua2hex(result),\n        'signature': signature.toString()\n    };\n    return _requests2.default.transaction.announce(endpoint, JSON.stringify(obj));\n};\n\nexports.default = send;\n"},"sourceMaps":{"js":{"version":3,"sources":["../../../src/model/transactions/send.js"],"names":["send","common","entity","endpoint","Error","privateKey","length","Helpers","isHexadecimal","kp","KeyPair","create","fixPrivateKey","result","Serialization","serializeTransaction","signature","sign","obj","Convert","ua2hex","toString","Requests","transaction","announce","JSON","stringify"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA;;;;;;;;;AASA,IAAIA,OAAO,SAAPA,IAAO,CAASC,MAAT,EAAiBC,MAAjB,EAAyBC,QAAzB,EAAmC;AAC1C,QAAG,CAACA,QAAD,IAAa,CAACD,MAAd,IAAwB,CAACD,MAA5B,EAAoC,MAAM,IAAIG,KAAJ,CAAU,qBAAV,CAAN;AACpC,QAAIH,OAAOI,UAAP,CAAkBC,MAAlB,KAA6B,EAA7B,IAAmCL,OAAOI,UAAP,CAAkBC,MAAlB,KAA6B,EAApE,EAAwE,MAAM,IAAIF,KAAJ,CAAU,2DAAV,CAAN;AACxE,QAAI,CAACG,kBAAQC,aAAR,CAAsBP,OAAOI,UAA7B,CAAL,EAA+C,MAAM,IAAID,KAAJ,CAAU,wCAAV,CAAN;AAC/C,QAAIK,KAAKC,kBAAQC,MAAR,CAAeJ,kBAAQK,aAAR,CAAsBX,OAAOI,UAA7B,CAAf,CAAT;AACA,QAAIQ,SAASC,wBAAcC,oBAAd,CAAmCb,MAAnC,CAAb;AACA,QAAIc,YAAYP,GAAGQ,IAAH,CAAQJ,MAAR,CAAhB;AACA,QAAIK,MAAM;AACN,gBAAQC,kBAAQC,MAAR,CAAeP,MAAf,CADF;AAEN,qBAAaG,UAAUK,QAAV;AAFP,KAAV;AAIA,WAAOC,mBAASC,WAAT,CAAqBC,QAArB,CAA8BrB,QAA9B,EAAwCsB,KAAKC,SAAL,CAAeR,GAAf,CAAxC,CAAP;AACH,CAZD;;kBAcelB,I","file":"send.js","sourcesContent":["import Helpers from '../../utils/helpers';\nimport Convert from '../../utils/convert';\nimport Serialization from '../../utils/serialization';\nimport KeyPair from '../../crypto/keyPair';\nimport Requests from '../../com/requests';\n\n/**\n * Serialize a transaction and broadcast it to the network\n *\n * @param {object} common - A common object\n * @param {object} entity - A prepared transaction object\n * @param {object} endpoint - An NIS endpoint object\n *\n * @return {promise} - An announce transaction promise of the com.requests service\n */\nlet send = function(common, entity, endpoint) {\n    if(!endpoint || !entity || !common) throw new Error('Missing parameter !');\n    if (common.privateKey.length !== 64 && common.privateKey.length !== 66) throw new Error('Invalid private key, length must be 64 or 66 characters !');\n    if (!Helpers.isHexadecimal(common.privateKey)) throw new Error('Private key must be hexadecimal only !');\n    let kp = KeyPair.create(Helpers.fixPrivateKey(common.privateKey));\n    let result = Serialization.serializeTransaction(entity);\n    let signature = kp.sign(result);\n    let obj = {\n        'data': Convert.ua2hex(result),\n        'signature': signature.toString()\n    };\n    return Requests.transaction.announce(endpoint, JSON.stringify(obj));\n}\n\nexport default send;"]}},"error":null,"hash":"758bfcf4521f795fb849da33a2332396","cacheData":{"env":{}}}